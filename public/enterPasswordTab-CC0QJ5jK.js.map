{"version":3,"file":"enterPasswordTab-CC0QJ5jK.js","sources":["../src/components/sidebarLeft/tabs/passcodeLock/enterPasswordTab.tsx"],"sourcesContent":["import {createEffect, createSignal, onCleanup} from 'solid-js';\n\nimport {MAX_PASSCODE_LENGTH} from '../../../../lib/passcode/constants';\nimport {usePasscodeActions} from '../../../../lib/passcode/actions';\n\nimport Section from '../../../section';\nimport {InputFieldTsx} from '../../../inputFieldTsx';\nimport Space from '../../../space';\nimport {i18n} from '../../../../lib/langPack';\nimport ripple from '../../../ripple'; ripple; // keep\nimport PasswordInputField from '../../../passwordInputField';\n\nimport type {AppPasscodeEnterPasswordTab} from '../solidJsTabs';\nimport {useSuperTab} from '../solidJsTabs/superTabProvider';\n\nimport LottieAnimation from './lottieAnimation';\n\nimport commonStyles from './common.module.scss';\n\n\ntype AppPasscodeEnterPasswordTabClass = typeof AppPasscodeEnterPasswordTab;\n\nconst EnterPasswordTab = () => {\n  const [tab] = useSuperTab<AppPasscodeEnterPasswordTabClass>();\n  const actions = usePasscodeActions();\n\n  let inputField: PasswordInputField;\n\n  const [value, setValue] = createSignal('');\n  const [isError, setIsError] = createSignal(false);\n\n  createEffect(() => {\n    value();\n    setIsError(false);\n  });\n\n  setTimeout(() => {\n    inputField.input.focus();\n  }, 400); // Smaller timeout will make the tab animation jerky\n\n  onCleanup(() => {\n    // Just in case\n    setValue('');\n    (inputField.input as HTMLInputElement).value = '';\n  });\n\n  const canSubmit = () => value() && value().length <= MAX_PASSCODE_LENGTH;\n\n  async function onSubmit(e: Event) {\n    e.preventDefault();\n\n    if(!canSubmit()) return;\n\n    try {\n      await tab.payload.onSubmit(value(), tab, actions);\n    } catch{\n      setIsError(true);\n    }\n  }\n\n  return (\n    <Section caption=\"PasscodeLock.Notice\">\n      <LottieAnimation name=\"UtyanPasscode\" />\n\n      <Space amount=\"1.125rem\" />\n\n      <form\n        action=\"\"\n        autocomplete=\"off\"\n        onSubmit={onSubmit}\n      >\n        <div class={commonStyles.AdditionalPadding}>\n          <InputFieldTsx\n            InputFieldClass={PasswordInputField}\n            instanceRef={(ref) => void (inputField = ref)}\n            maxLength={MAX_PASSCODE_LENGTH}\n            autocomplete=\"off\"\n            value={value()}\n            errorLabel={isError() ? 'PasscodeLock.PasscodesDontMatch' : undefined}\n            label={tab.payload.inputLabel}\n            onRawInput={setValue}\n          />\n        </div>\n\n        <Space amount=\"1rem\" />\n\n        <div class={commonStyles.AdditionalPadding}>\n          <button\n            use:ripple\n            type=\"submit\"\n            class=\"btn-primary btn-color-primary btn-large\"\n            disabled={!canSubmit()}\n          >\n            {i18n(tab.payload.buttonText)}\n          </button>\n        </div>\n      </form>\n\n      <Space amount=\"1rem\" />\n    </Section>\n  );\n};\n\nexport default EnterPasswordTab;\n"],"names":["EnterPasswordTab","tab","useSuperTab","actions","usePasscodeActions","inputField","value","setValue","createSignal","isError","setIsError","createEffect","setTimeout","input","focus","onCleanup","canSubmit","length","MAX_PASSCODE_LENGTH","onSubmit","e","preventDefault","payload","_$createComponent","Section","caption","children","LottieAnimation","name","Space","amount","_el$","_tmpl$","_el$2","firstChild","_el$3","nextSibling","_el$4","addEventListener","_$insert","InputFieldTsx","InputFieldClass","PasswordInputField","instanceRef","ref","maxLength","autocomplete","errorLabel","undefined","label","inputLabel","onRawInput","_$use","ripple","i18n","buttonText","_$effect","_p$","_v$","commonStyles","AdditionalPadding","_v$2","_v$3","_$className","disabled"],"mappings":"s2BAsBMA,GAAmBA,IAAM,CAC7B,KAAM,CAACC,CAAG,EAAIC,IACRC,EAAUC,IAEhB,IAAIC,EAEJ,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAa,EAAE,EACnC,CAACC,EAASC,CAAU,EAAIF,EAAa,EAAK,EAEhDG,EAAa,IAAM,CACjBL,IACAI,EAAW,EAAK,CAClB,CAAC,EAEDE,WAAW,IAAM,CACfP,EAAWQ,MAAMC,OAClB,EAAE,GAAG,EAENC,EAAU,IAAM,CAEdR,EAAS,EAAE,EACVF,EAAWQ,MAA2BP,MAAQ,EACjD,CAAC,EAED,MAAMU,EAAYA,IAAMV,EAAK,GAAMA,EAAO,EAACW,QAAUC,EAErD,eAAeC,EAASC,EAAU,CAGhC,GAFAA,EAAEC,eAAc,EAEb,EAACL,EAAS,EAEb,GAAI,CACF,MAAMf,EAAIqB,QAAQH,SAASb,EAAK,EAAIL,EAAKE,CAAO,CAClD,MAAO,CACLO,EAAW,EAAI,CACjB,CACF,CAEA,OAAAa,EACGC,EAAO,CAACC,QAAO,sBAAA,IAAAC,UAAA,CAAA,MAAAH,CAAAA,EACbI,EAAe,CAACC,KAAI,gBAAAL,EAAAA,EAEpBM,EAAK,CAACC,OAAM,UAAA,CAAA,GAAA,IAAA,CAAA,MAAAC,EAAAC,EAAA,EAAAC,EAAAF,EAAAG,WAAAC,EAAAF,EAAAG,YAAAC,EAAAF,EAAAD,WAAAH,OAAAA,EAAAO,iBAAA,SAKDnB,CAAQ,EAAAoB,EAAAN,EAAAV,EAGfiB,EAAa,CACZC,gBAAiBC,EACjBC,YAAcC,GAAQ,KAAMvC,EAAauC,GACzCC,UAAW3B,EACX4B,aAAY,MAAA,IACZxC,OAAK,CAAA,OAAEA,EAAK,CAAE,EAAA,IACdyC,YAAU,CAAA,OAAEtC,EAAO,EAAK,kCAAoCuC,MAAS,EAAA,IACrEC,OAAK,CAAA,OAAEhD,EAAIqB,QAAQ4B,UAAU,EAC7BC,WAAY5C,CAAQ,CAAA,CAAA,EAAAgC,EAAAR,EAAAR,EAIvBM,EAAK,CAACC,OAAM,MAAA,CAAA,EAAAK,CAAA,EAAAiB,EAILC,EAAMhB,EAAA,IAAA,EAAA,EAAAE,EAAAF,EAAA,IAKTiB,EAAKrD,EAAIqB,QAAQiC,UAAU,CAAC,EAAAC,EAAAC,GAAA,CAAA,MAAAC,EAtBrBC,EAAaC,kBAAiBC,EAe9BF,EAAaC,kBAAiBE,EAK5B,CAAC9C,IAAW0C,OAAAA,IAAAD,EAAAC,KAAAK,EAAA9B,EAAAwB,EAAAC,IAAAA,CAAA,EAAAG,IAAAJ,EAAAI,MAAAE,EAAA5B,EAAAsB,EAAAI,KAAAA,CAAA,EAAAC,IAAAL,EAAAK,OAAAzB,EAAA2B,SAAAP,EAAAK,KAAAA,GAAAL,CAAA,EAAA,CAAAC,IAAAV,OAAAa,KAAAb,OAAAc,KAAAd,MAAA,CAAA,EAAAjB,IAAAR,EAAAA,EAO3BM,EAAK,CAACC,OAAM,MAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAGnB"}